{% extends "layout.html" %}
{% block content %}
<div class="max-w-5xl mx-auto px-6 py-20">
    {% if page.slug == 'home' %}
    {% endif %}

    <article id="projects" class="prose prose-invert prose-blue max-w-none">
        <style>{{ page.css | safe }}</style>
        
        {% if logic_error %}
            {% if session.get('user') %}
                <div class="glass p-8 rounded-[2.5rem] border-red-500/30 overflow-hidden">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="w-10 h-10 bg-red-500/20 rounded-xl flex items-center justify-center text-red-500">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>
                        </div>
                        <div>
                            <h3 class="font-bold text-red-500">Runtime Execution Error</h3>
                            <p class="text-xs text-slate-500 font-mono">Traceback generated for Admin UID: {{ session.get('user') }}</p>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <div class="p-4 bg-slate-950 rounded-xl border border-slate-800">
                            <p class="text-xs font-bold text-slate-500 uppercase mb-2">Message</p>
                            <code class="text-sm text-red-400">{{ logic_error }}</code>
                        </div>
                        
                        <div class="p-4 bg-slate-950 rounded-xl border border-slate-800">
                            <p class="text-xs font-bold text-slate-500 uppercase mb-2">Stack Trace</p>
                            <pre class="text-[10px] leading-relaxed text-slate-400 whitespace-pre-wrap font-mono">{{ error_traceback }}</pre>
                        </div>
                    </div>
                </div>
            {% else %}
                <div class="glass p-12 rounded-[3rem] border-slate-800 text-center space-y-6">
                    <div class="w-16 h-16 bg-slate-900 rounded-2xl flex items-center justify-center mx-auto text-slate-500">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    </div>
                    <div class="space-y-2">
                        <h2 class="text-2xl font-bold text-white">System Anomaly Detected</h2>
                        <p class="text-slate-400 max-w-sm mx-auto">An unknown error occurred during node execution. The fault has been logged and reported.</p>
                    </div>
                    <a href="/" class="inline-block px-8 py-3 bg-slate-900 border border-slate-800 rounded-full text-sm font-bold hover:bg-slate-800 transition-colors">Return Home</a>
                </div>
            {% endif %}
        {% else %}
            {{ rendered_node_content | safe }}
        {% endif %}
        
        <script>{{ page.js | safe }}</script>
    </article>
</div>
{% endblock %}